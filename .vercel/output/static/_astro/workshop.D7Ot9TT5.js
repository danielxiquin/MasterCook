import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.RH_Wq4ov.js";import{M as P,u as B,P as I,a as D,b as R,L as z,m as G}from"./proxy.CtWKIOJ4.js";class W extends r.Component{getSnapshotBeforeUpdate(l){const n=this.props.childRef.current;if(n&&l.isPresent&&!this.props.isPresent){const a=n.offsetParent,i=a instanceof HTMLElement&&a.offsetWidth||0,d=this.props.sizeRef.current;d.height=n.offsetHeight||0,d.width=n.offsetWidth||0,d.top=n.offsetTop,d.left=n.offsetLeft,d.right=i-d.width-d.left}return null}componentDidUpdate(){}render(){return this.props.children}}function T({children:t,isPresent:l,anchorX:n}){const a=r.useId(),i=r.useRef(null),d=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=r.useContext(P);return r.useInsertionEffect(()=>{const{width:c,height:f,top:j,left:m,right:g}=d.current;if(l||!i.current||!c||!f)return;const b=n==="left"?`left: ${m}`:`right: ${g}`;i.current.dataset.motionPopId=a;const x=document.createElement("style");return u&&(x.nonce=u),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${j}px !important;
          }
        `),()=>{document.head.contains(x)&&document.head.removeChild(x)}},[l]),e.jsx(W,{isPresent:l,childRef:i,sizeRef:d,children:r.cloneElement(t,{ref:i})})}const O=({children:t,initial:l,isPresent:n,onExitComplete:a,custom:i,presenceAffectsLayout:d,mode:u,anchorX:c})=>{const f=B($),j=r.useId();let m=!0,g=r.useMemo(()=>(m=!1,{id:j,initial:l,isPresent:n,custom:i,onExitComplete:b=>{f.set(b,!0);for(const x of f.values())if(!x)return;a&&a()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,a]);return d&&m&&(g={...g}),r.useMemo(()=>{f.forEach((b,x)=>f.set(x,!1))},[n]),r.useEffect(()=>{!n&&!f.size&&a&&a()},[n]),u==="popLayout"&&(t=e.jsx(T,{isPresent:n,anchorX:c,children:t})),e.jsx(I.Provider,{value:g,children:t})};function $(){return new Map}const y=t=>t.key||"";function L(t){const l=[];return r.Children.forEach(t,n=>{r.isValidElement(n)&&l.push(n)}),l}const H=({children:t,custom:l,initial:n=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:d="sync",propagate:u=!1,anchorX:c="left"})=>{const[f,j]=D(u),m=r.useMemo(()=>L(t),[t]),g=u&&!f?[]:m.map(y),b=r.useRef(!0),x=r.useRef(m),v=B(()=>new Map),[C,s]=r.useState(m),[o,h]=r.useState(m);R(()=>{b.current=!1,x.current=m;for(let F=0;F<o.length;F++){const p=y(o[F]);g.includes(p)?v.delete(p):v.get(p)!==!0&&v.set(p,!1)}},[o,g.length,g.join("-")]);const w=[];if(m!==C){let F=[...m];for(let p=0;p<o.length;p++){const N=o[p],k=y(N);g.includes(k)||(F.splice(p,0,N),w.push(N))}return d==="wait"&&w.length&&(F=w),h(L(F)),s(m),null}const{forceRender:E}=r.useContext(z);return e.jsx(e.Fragment,{children:o.map(F=>{const p=y(F),N=u&&!f?!1:m===o||g.includes(p),k=()=>{if(v.has(p))v.set(p,!0);else return;let S=!0;v.forEach(M=>{M||(S=!1)}),S&&(E?.(),h(x.current),u&&j?.(),a&&a())};return e.jsx(O,{isPresent:N,initial:!b.current||n?void 0:!1,custom:l,presenceAffectsLayout:i,mode:d,onExitComplete:N?void 0:k,anchorX:c,children:F},p)})})},V=()=>e.jsxs("div",{className:"absolute -z-10 inset-0 overflow-hidden opacity-70 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[20%] -left-[10%] w-[40%] h-[40%] rounded-full bg-gradient-to-br from-[#D94F4F]/20 to-transparent blur-3xl"}),e.jsx("div",{className:"absolute top-[60%] -right-[10%] w-[30%] h-[30%] rounded-full bg-gradient-to-br from-[#6B8E23]/20 to-transparent blur-3xl"})]}),X=()=>{const[t,l]=r.useState(0);return r.useEffect(()=>{const n=()=>{const a=document.documentElement.scrollHeight-window.innerHeight,i=window.scrollY;l(i/a)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),e.jsx("div",{className:"fixed top-0 left-0 w-full h-[2px] z-50",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#6B8E23] via-[#6B8E23]/70 to-[#FAFAFA]",style:{transform:`scaleX(${t})`,transformOrigin:"0%"}})})},A=()=>e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#D94F4F]/30 border-t-[#D94F4F] rounded-full animate-spin"})}),Q=({src:t,alt:l,className:n})=>{const[a,i]=r.useState(!1),[d,u]=r.useState(null);return r.useEffect(()=>{const c=new Image;c.src=t||"/images/default-workshop.jpg",c.onload=()=>{u(c.src),i(!0)},c.onerror=()=>{u("/images/default-workshop.jpg"),i(!0)}},[t]),e.jsxs("div",{className:"relative w-full aspect-[3/4] overflow-hidden",children:[!a&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-[#333333] z-10 w-full h-full",children:e.jsx("div",{initial:{opacity:0},animate:{opacity:1},children:e.jsx(A,{})})}),d&&e.jsx("img",{src:d,alt:l,className:`${n} ${a?"opacity-100":"opacity-0"} transition-opacity duration-500 w-full h-full object-cover`,onLoad:()=>i(!0)})]})},U=({category:t,isSelected:l,onClick:n})=>e.jsxs("button",{onClick:n,className:`px-4 py-3 text-sm font-medium rounded-lg transition-all duration-300 mb-2 w-full text-left flex items-center ${l?"bg-[#333333] text-[#FAFAFA] shadow-md":"bg-[#FFFFFE]/90 text-[#333333] hover:bg-[#FFFFFE]"}`,children:[l&&e.jsx("span",{className:"w-1 h-5 bg-[#6B8E23] rounded-full mr-2 inline-block"}),t.name]}),J=({categories:t,selectedCategory:l,onCategoryChange:n})=>{const[a,i]=r.useState(!1),d=t.find(c=>String(c.id)===l)?.name||"Todos",u=c=>{n(c),i(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!a),className:"w-full p-3 bg-[#FFFFFE] text-[#333333] rounded-lg border border-[#FFFFE3]/50 flex items-center justify-between focus:outline-none focus:ring-2 focus:ring-[#6B8E23]/30 focus:border-[#6B8E23]/50 transition-all duration-300",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"w-1 h-5 bg-[#D94F4F] rounded-full mr-2 inline-block"}),d]}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${a?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(H,{children:a&&e.jsx(G.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute z-50 w-full mt-2 bg-[#FFFFFE] border border-[#FFFFE3]/50 rounded-lg shadow-lg max-h-64 overflow-y-auto",children:t.map(c=>e.jsxs("button",{onClick:()=>u(String(c.id)),className:`w-full px-4 py-3 text-left text-sm font-medium hover:bg-[#F5F5F5] transition-colors flex items-center ${l===String(c.id)?"bg-[#333333] text-[#FAFAFA]":"text-[#333333]"}`,children:[l===String(c.id)&&e.jsx("span",{className:"w-1 h-4 bg-[#6B8E23] rounded-full mr-2 inline-block"}),c.name]},c.id))})}),a&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>i(!1)})]})},_=({workshop:t,workshopImages:l,index:n})=>{const a=d=>{const u=new Date(d);return new Intl.DateTimeFormat("es-ES",{year:"numeric",month:"long",day:"numeric"}).format(u)},i=d=>{const[u,c]=d.split(":");return`${u}:${c}`};return e.jsx("div",{children:e.jsx("a",{href:`/workshopsId/${t.id}`,className:"block",children:e.jsxs("article",{className:"group relative w-full h-full  overflow-hidden bg-[#FFFFFE] shadow-sm hover:shadow-md transition-all duration-300 border border-[#FFFFE3]/20",children:[e.jsxs("div",{className:"relative overflow-hidden bg-[#333333]",children:[e.jsx(Q,{src:l[t.name]||"/images/default-workshop.jpg",alt:t.name,className:"group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:"bg-[#333333] text-[#FAFAFA] px-3 py-1 text-xs font-medium rounded-full backdrop-blur-sm",children:e.jsx("span",{className:"font-medium",children:t.modality==="presencial"?"PRESENCIAL":"VIRTUAL"})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-[#6B8E23] font-medium tracking-wide mb-1",children:t.category_name||"Categoría"}),e.jsx("h3",{className:"text-lg text-[#333333] font-medium tracking-tight line-clamp-1 group-hover:text-[#D94F4F] transition-colors",children:t.name}),e.jsxs("p",{className:"text-sm text-[#666666] mt-1",children:["Por ",t.instructor_name]}),e.jsxs("p",{className:"text-xs text-[#666666] mt-2",children:[a(t.date)," • ",i(t.start_time)," - ",i(t.end_time)]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-[#FFFFE3]/30",children:[e.jsxs("p",{className:"text-base font-bold text-[#333333]",children:["Q",t.price.toFixed(2)]}),e.jsxs("span",{className:"text-xs bg-[#F5F5F5] px-2 py-1 rounded",children:[t.available_slots," disponibles"]})]})]})]})})})};function q(){const[t,l]=r.useState([]),[n,a]=r.useState([]),[i,d]=r.useState([]),[u,c]=r.useState("todo"),[f,j]=r.useState(!0),[m,g]=r.useState(""),[b,x]=r.useState("default"),v={"Sabores de Italia":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibuMuhOjpzB02MisAEvYjHQhPGucaFX54CJrUOn","Pastelería Francesa":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibu7htBM8RilvS4mGda0BVPYjrps1H5Lf6DObNF","Comida Saludable para la Semana":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibuBHsdxLPb6lrQWNcyYFdnfEzkeVHJXgoMawmD","Cocina Vegetariana Creativa":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibutFnAGpualz2QAIYZWuOfsk5nxJDdbcVy1pe4","Introducción a la Cocina Molecular":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibutHioByualz2QAIYZWuOfsk5nxJDdbcVy1pe4","Cocina Primaveral":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibumctXQLNrPvHGd1j2UM5sACiWEgXI6atVnYyz","Primeros Pasos en la Cocina":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibuuXdUT8fyXR7wfFas8jC0PIStrJ3dMb4ZeBKD","Cocineros Junior":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibuInmtowlAyO8kqw0XmJiTH3EQFBVbCG4o2UaS","Cocina Asiática":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibuEbSDr1NQ3G5DiXUHsPJjl4xCBKmyotakWeFZ","Decoración de Cupcakes":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibu6VjN9FHvu4jTO7gzRm3dXnqYyJGwxA5VLMkc","Bowls Saludables":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibuabLKK2ABUdWKHfOIM621lGQbSXNs5CArhFxz","Proteínas Vegetales":"https://hd51x5cptm.ufs.sh/f/lhdSxG5nEibu5F9013ZRtlECNGU1HWj4bcvBhzO65xgwroMF"};r.useEffect(()=>{const s=window.localStorage?.getItem("selectedCategory");s&&(c(s),window.localStorage?.removeItem("selectedCategory"))},[]),r.useEffect(()=>{async function s(){j(!0);try{const h=await(await fetch("https://booking-service.mangoflower-5e37f0a4.eastus.azurecontainerapps.io/api/workshops")).json();l(h.workshops||[])}catch(o){console.error("Error fetching workshops:",o),l([])}finally{j(!1)}}s()},[]),r.useEffect(()=>{async function s(){try{const w=(await(await fetch("https://booking-service.mangoflower-5e37f0a4.eastus.azurecontainerapps.io/api/workshop-categories")).json()).categories.map((F,p)=>({id:String(p+1),name:F})),E=[{id:"todo",name:"Todos",description:"Todos los talleres disponibles"},...w];a(E)}catch(o){console.error("Error fetching categories:",o),a([{id:"todo",name:"Todos",description:"Todos los talleres disponibles"}])}}s()},[]),r.useEffect(()=>{let s=[...t];if(u.toLowerCase()!=="todo"){const o=parseInt(u);s=s.filter(h=>h.category_id===o)}if(m.trim()){const o=m.trim().toLowerCase();s=s.filter(h=>{const w=h.name?.toLowerCase()||"",E=h.instructor_name?.toLowerCase()||"",F=h.category_name?.toLowerCase()||"";return w.includes(o)||E.includes(o)||F.includes(o)})}switch(b){case"price-asc":s.sort((o,h)=>o.price-h.price);break;case"price-desc":s.sort((o,h)=>h.price-o.price);break;case"date-asc":s.sort((o,h)=>new Date(o.date)-new Date(h.date));break;case"date-desc":s.sort((o,h)=>new Date(h.date)-new Date(o.date));break}d(s)},[u,t,m,b]);const C=[{label:"Predeterminado",value:"default"},{label:"Precio: Menor a Mayor",value:"price-asc"},{label:"Precio: Mayor a Menor",value:"price-desc"},{label:"Fecha: Más cercana",value:"date-asc"},{label:"Fecha: Más lejana",value:"date-desc"}];return e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsxs("div",{className:"relative py-8 min-h-screen overflow-hidden bg-[#FAFAFA]",children:[e.jsx(V,{}),e.jsxs("main",{className:"container mx-auto px-4 relative",children:[e.jsx("header",{className:"w-full mt-20 md:mt-24 border-b border-b-[#666666]/20 pb-8 overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-2",children:e.jsxs("span",{className:"text-lg tracking-wide text-[#6B8E23] inline-block relative font-medium",children:["EXPLORA",e.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#6B8E23]"})]})}),e.jsxs("h1",{className:"text-[#333333] text-4xl md:text-5xl uppercase font-bold tracking-tight",children:[e.jsx("span",{className:"mr-3",children:"Nuestros"}),e.jsxs("span",{className:"relative inline-block",children:["Talleres",e.jsx("span",{className:"absolute -top-1 -right-6 w-4 h-4 bg-[#D94F4F] rounded-full"})]})]})]})}),e.jsxs("section",{className:"w-full pt-8 flex flex-col md:flex-row gap-8",children:[e.jsxs("div",{className:"w-full md:w-64 space-y-6 md:sticky md:top-24 md:self-start",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs text-[#666666] mb-2 uppercase tracking-wider",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar talleres...",value:m,onChange:s=>g(s.target.value),className:"w-full p-3 pl-4 bg-[#FFFFFE] text-[#333333] rounded-lg border border-[#FFFFE3]/50 focus:outline-none focus:ring-2 focus:ring-[#6B8E23]/30 focus:border-[#6B8E23]/50 transition-all duration-300"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"w-4 h-4 text-[#666666]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs text-[#666666] mb-2 uppercase tracking-wider",children:"Ordenar por"}),e.jsx("select",{value:b,onChange:s=>x(s.target.value),className:"w-full p-3 bg-[#FFFFFE] text-[#333333] rounded-lg border border-[#FFFFE3]/50 focus:outline-none focus:ring-2 focus:ring-[#6B8E23]/30 focus:border-[#6B8E23]/50 transition-all duration-300",children:C.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"md:hidden",children:[e.jsx("label",{className:"block text-xs text-[#666666] mb-2 uppercase tracking-wider",children:"Categorías"}),e.jsx(J,{categories:n,selectedCategory:u,onCategoryChange:c})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsxs("h4",{className:"text-[#333333] text-lg mb-4 flex tracking-wider uppercase items-center font-medium",children:[e.jsx("span",{className:"w-1 h-5 bg-[#D94F4F] rounded-full mr-2 inline-block"}),"Categorías"]}),e.jsx("div",{className:"space-y-1 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:n.map(s=>e.jsx(U,{category:s,isSelected:u===String(s.id),onClick:()=>c(String(s.id))},s.id))})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"w-full flex items-center justify-between bg-[#FFFFFE]/80 backdrop-blur-sm p-4 rounded-lg border border-[#FFFFE3]/50 mb-8",children:[e.jsx("div",{className:"bg-[#F5F5F5] px-3 py-1 rounded-full border border-[#FFFFE3]/30",children:e.jsxs("small",{className:"text-sm text-[#333333] font-light tracking-wider uppercase whitespace-nowrap",children:[i.length," ",i.length===1?"TALLER":"TALLERES"]})}),u!=="todo"&&e.jsxs("div",{className:"text-[#666666] text-sm hidden sm:block",children:["Categoría: ",e.jsx("span",{className:"font-medium text-[#6B8E23]",children:n.find(s=>String(s.id)===u)?.name||""})]})]}),f?e.jsx("div",{className:"min-h-[400px] flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx(A,{}),e.jsx("p",{className:"text-[#666666]",children:"Cargando talleres..."})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 gap-y-10",children:i.length>0?i.map((s,o)=>e.jsx(_,{workshop:s,workshopImages:v,index:o},s.id)):e.jsx("div",{className:"col-span-full h-48 flex items-center justify-center text-center",children:e.jsxs("div",{className:"bg-[#FFFFFE] backdrop-blur-md rounded-lg border border-[#FFFFE3]/50 p-8 w-full max-w-md",children:[e.jsx("h3",{className:"text-xl text-[#333333] mb-2",children:"Sin resultados"}),e.jsx("p",{className:"text-[#666666] mb-4",children:"No se encontraron talleres con los filtros seleccionados"}),e.jsx("button",{onClick:()=>{c("todo"),g(""),x("default")},className:"px-4 py-2 bg-[#D94F4F] text-white rounded-full hover:bg-[#D94F4F]/90 transition-colors",children:"Limpiar filtros"})]})})})})]})]})]})]}),e.jsx("div",{className:"fixed bottom-5 right-5",children:e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"bg-[#333333] text-white rounded-full w-12 h-12 p-3 flex items-center justify-center shadow-lg hover:bg-[#333333]/90 transition-all duration-300 hover:transform hover:translate-y-1","aria-label":"Volver arriba",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 19V5M5 12l7-7 7 7"})})})})]})}export{q as default};
