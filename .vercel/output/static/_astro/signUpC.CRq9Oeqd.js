import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.RH_Wq4ov.js";import{m}from"./proxy.CtWKIOJ4.js";import{C as k,L as g}from"./lock.CKM9AT-q.js";import{C as B}from"./check.DErKrk8i.js";import{U as S}from"./user.GJspPIFP.js";import{M as A}from"./mail._kjwFHRK.js";import{A as D}from"./arrow-right.1S_H47eA.js";import"./createLucideIcon.CFjhCtiB.js";const z=()=>e.jsxs("div",{className:"absolute -z-10 inset-0 overflow-hidden opacity-70 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[20%] -left-[10%] w-[40%] h-[40%] rounded-full bg-gradient-to-br from-[#D94F4F]/20 to-transparent blur-3xl"}),e.jsx("div",{className:"absolute top-[60%] -right-[10%] w-[30%] h-[30%] rounded-full bg-gradient-to-br from-[#6B8E23]/20 to-transparent blur-3xl"})]}),P=()=>e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"});function Z(){const[u,j]=a.useState(""),[x,v]=a.useState(""),[i,N]=a.useState(""),[d,y]=a.useState(""),[o,p]=a.useState(!1),[h,c]=a.useState(null),[r,E]=a.useState(!1),[n,w]=a.useState(0),[f,C]=a.useState(!1),F=s=>{let t=0;s.length>=8&&(t+=1),/[A-Z]/.test(s)&&(t+=1),/[0-9]/.test(s)&&(t+=1),/[^A-Za-z0-9]/.test(s)&&(t+=1),w(t)},b=async s=>{if(s.preventDefault(),!f){c("Debes aceptar los términos y condiciones");return}if(i!==d){c("Las contraseñas no coinciden");return}if(n<3){c("La contraseña debe ser más segura");return}p(!0),c(null);try{const t=await fetch("https://booking-service.mangoflower-5e37f0a4.eastus.azurecontainerapps.io/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u,email:x,password:i})}),l=await t.json();if(!t.ok)throw new Error(l.message||"Error al crear la cuenta");l.token&&(console.log("Token guardado:",l.token),l.user&&console.log("Usuario guardado:",l.user)),E(!0),setTimeout(()=>{console.log("Redirigiendo a:",l.token?"/":"/login")},2e3)}catch(t){c(t.message||"Ocurrió un error durante el registro")}finally{p(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] flex items-center justify-center px-4 pt-16 pb-12",children:[e.jsx(z,{}),e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md bg-white rounded-xl border border-[#e0dfdf] overflow-hidden my-8",children:[e.jsxs("div",{className:"px-8 pt-8 pb-6 border-b border-[#E5E5E5]",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#333333] mb-2",children:"Crear cuenta"}),e.jsx("p",{className:"text-[#666666]",children:"Regístrate para acceder a todos nuestros servicios"})]}),e.jsxs("div",{className:"p-8",children:[h&&e.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-[#D94F4F]/10 border border-[#D94F4F]/20 rounded-lg flex items-center gap-3 text-[#D94F4F]",children:[e.jsx(k,{size:18}),e.jsx("p",{children:h})]}),r&&e.jsx(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-[#6B8E23]/10 border border-[#6B8E23]/20 rounded-lg flex items-center gap-3 text-[#6B8E23]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{size:18}),e.jsx("p",{children:"¡Cuenta creada correctamente! Redirigiendo..."})]})}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-[#333333]",children:"Nombre completo"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(S,{size:18})}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:u,onChange:s=>j(s.target.value),placeholder:"Juan Pérez",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333] placeholder:text-[#999999]",disabled:o||r})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[#333333]",children:"Correo electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(A,{size:18})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:x,onChange:s=>v(s.target.value),placeholder:"correo@ejemplo.com",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333] placeholder:text-[#999999]",disabled:o||r})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#333333]",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(g,{size:18})}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:i,onChange:s=>{N(s.target.value),F(s.target.value)},placeholder:"••••••••",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333]",disabled:o||r})]}),i&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex gap-1 mb-1",children:[...Array(4)].map((s,t)=>e.jsx("div",{className:`h-1 flex-1 rounded-full ${t<n?t<2?"bg-[#D94F4F]":"bg-[#6B8E23]":"bg-[#E5E5E5]"}`},t))}),e.jsxs("p",{className:"text-xs text-[#666666]",children:[n===0&&"Contraseña muy débil",n===1&&"Contraseña débil",n===2&&"Contraseña moderada",n===3&&"Contraseña fuerte",n===4&&"Contraseña muy fuerte"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-[#333333]",children:"Confirmar contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(g,{size:18})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:d,onChange:s=>y(s.target.value),placeholder:"••••••••",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333]",disabled:o||r,onKeyDown:s=>{s.key==="Enter"&&b(s)}})]}),d&&i!==d&&e.jsx("p",{className:"mt-1 text-xs text-[#D94F4F]",children:"Las contraseñas no coinciden"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"terms",name:"terms",type:"checkbox",checked:f,onChange:s=>C(s.target.checked),className:"h-4 w-4 text-[#6B8E23] focus:ring-[#6B8E23] border-[#E5E5E5] rounded",disabled:o||r}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-[#666666]",children:["Acepto los"," ",e.jsx("a",{href:"/terms",className:"text-[#6B8E23] hover:underline",children:"términos y condiciones"})]})]}),e.jsx("button",{type:"button",onClick:b,disabled:o||r,className:`w-full flex items-center justify-center gap-2 py-3 px-4 rounded-lg transition-all duration-300 ${o||r?"bg-[#D94F4F]/70 text-white cursor-not-allowed":"bg-[#D94F4F] text-white hover:bg-[#c04545] shadow-md hover:shadow-lg"}`,children:o?e.jsx(P,{}):r?"Cuenta creada":e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Crear cuenta"}),e.jsx(D,{size:18})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-[#666666]",children:["¿Ya tienes una cuenta?"," ",e.jsx("a",{href:"/login",className:"font-medium text-[#6B8E23] hover:text-[#566f1c] transition-colors",children:"Inicia sesión"})]})})]})]})]})}export{Z as default};
