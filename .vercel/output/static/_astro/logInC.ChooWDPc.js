import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.BVOCwoKb.js";import{C as I,L as F}from"./lock._tRpclxd.js";import{M as C}from"./mail.DV8CpiEN.js";import{A as B}from"./arrow-right.Bzx5iRUs.js";import"./createLucideIcon.BlEPHBTn.js";const L=()=>e.jsxs("div",{className:"absolute -z-10 inset-0 overflow-hidden opacity-70 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[20%] -left-[10%] w-[40%] h-[40%] rounded-full bg-gradient-to-br from-[#D94F4F]/20 to-transparent blur-3xl"}),e.jsx("div",{className:"absolute top-[60%] -right-[10%] w-[30%] h-[30%] rounded-full bg-gradient-to-br from-[#6B8E23]/20 to-transparent blur-3xl"})]}),j=()=>e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),_=()=>e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]});function O(){const[l,w]=a.useState(""),[c,v]=a.useState(""),[i,m]=a.useState(!1),[d,g]=a.useState(!1),[u,r]=a.useState(null),[n,h]=a.useState(!1),[E,y]=a.useState(!1),x="https://booking-service.mangoflower-5e37f0a4.eastus.azurecontainerapps.io",N="881859997618-53q6ira3lf17me66lhj4kpk0q4bb25n1.apps.googleusercontent.com";a.useEffect(()=>{k()},[]);const k=()=>{if(document.getElementById("google-identity-script")){p();return}const o=document.createElement("script");o.id="google-identity-script",o.src="https://accounts.google.com/gsi/client",o.async=!0,o.defer=!0,o.onload=p,o.onerror=()=>{console.error("Error cargando Google Identity Services"),r("Error cargando Google Sign-In")},document.head.appendChild(o)},p=()=>{if(window.google&&window.google.accounts)try{window.google.accounts.id.initialize({client_id:N,callback:S,auto_select:!1,cancel_on_tap_outside:!0}),console.log("Google Sign-In inicializado correctamente")}catch(o){console.error("Error inicializando Google Sign-In:",o),r("Error configurando Google Sign-In")}else console.error("Google Identity Services no disponible"),r("Google Sign-In no está disponible")},S=async o=>{if(!o.credential){r("No se recibió credencial de Google");return}g(!0),r(null);try{console.log("Enviando credencial a backend...");const t=await fetch(`${x}/api/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:o.credential})}),s=await t.json();if(console.log("Respuesta del backend:",s),!t.ok)throw new Error(s.error||s.message||"Error al iniciar sesión con Google");if(s.success)console.log("Tokens guardados:",{access_token:s.access_token,user:s.user}),h(!0),setTimeout(()=>{console.log("Redirigiendo a dashboard..."),alert("¡Login exitoso! En una app real, serías redirigido al dashboard.")},2e3);else throw new Error(s.error||"Error en la autenticación")}catch(t){console.error("Error en Google login:",t),r(t.message||"Error al iniciar sesión con Google")}finally{g(!1)}},G=()=>{if(window.google&&window.google.accounts)try{window.google.accounts.id.prompt()}catch(o){console.error("Error al mostrar Google Sign-In:",o),r("Error al iniciar Google Sign-In")}else r("Google Sign-In no está disponible. Recarga la página e intenta de nuevo.")},f=async o=>{if(o.preventDefault(),!l||!c){r("Por favor ingresa email y contraseña");return}m(!0),r(null);try{console.log("Iniciando login tradicional...");const t=await fetch(`${x}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.trim(),password:c})}),s=await t.json();if(console.log("Respuesta login tradicional:",s),!t.ok)throw new Error(s.message||s.error||"Error al iniciar sesión");console.log("Tokens guardados:",{access_token:s.access_token,user:s.user}),h(!0),setTimeout(()=>{console.log("Redirigiendo a dashboard..."),alert("¡Login exitoso! En una app real, serías redirigido al dashboard.")},2e3)}catch(t){console.error("Error en login tradicional:",t),r(t.message||"Error al iniciar sesión")}finally{m(!1)}},b=o=>{o.key==="Enter"&&!i&&!n&&l.trim()&&c&&f(o)};return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] flex items-center justify-center px-4",children:[e.jsx(L,{}),e.jsxs("div",{className:"w-full max-w-md bg-white rounded-xl border border-[#e0dfdf] overflow-hidden transform transition-all duration-300 hover:shadow-lg",children:[e.jsxs("div",{className:"px-8 pt-8 pb-6 border-b border-[#E5E5E5]",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#333333] mb-2",children:"Inicia sesión"}),e.jsx("p",{className:"text-[#666666]",children:"Ingresa tus credenciales para acceder a tu cuenta"})]}),e.jsxs("div",{className:"p-8",children:[u&&e.jsxs("div",{className:"mb-6 p-4 bg-[#D94F4F]/10 border border-[#D94F4F]/20 rounded-lg flex items-center gap-3 text-[#D94F4F] animate-pulse",children:[e.jsx(I,{size:18}),e.jsx("p",{children:u})]}),n&&e.jsx("div",{className:"mb-6 p-4 bg-[#6B8E23]/10 border border-[#6B8E23]/20 rounded-lg flex items-center gap-3 text-[#6B8E23]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),e.jsx("p",{children:"¡Sesión iniciada correctamente! Redirigiendo..."})]})}),e.jsx("div",{className:"mb-6",children:e.jsx("button",{type:"button",onClick:G,disabled:d||n,className:`w-full flex items-center justify-center gap-3 py-3 px-4 border border-[#E5E5E5] rounded-lg transition-all duration-300 ${d||n?"bg-gray-50 cursor-not-allowed opacity-70":"bg-white hover:bg-gray-50 hover:border-[#D5D5D5] shadow-sm hover:shadow-md"}`,children:d?e.jsx(j,{}):e.jsxs(e.Fragment,{children:[e.jsx(_,{}),e.jsx("span",{className:"text-[#333333] font-medium",children:"Continuar con Google"})]})})}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-[#E5E5E5]"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-white text-[#666666]",children:"O continúa con"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[#333333]",children:"Correo electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(C,{size:18})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:l,onChange:o=>w(o.target.value),onKeyPress:b,placeholder:"correo@ejemplo.com",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333] placeholder:text-[#999999] transition-all duration-200",disabled:i||n})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#333333]",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(F,{size:18})}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:c,onChange:o=>v(o.target.value),onKeyPress:b,placeholder:"••••••••",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333] transition-all duration-200",disabled:i||n})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",checked:E,onChange:o=>y(o.target.checked),className:"h-4 w-4 text-[#6B8E23] focus:ring-[#6B8E23] border-[#E5E5E5] rounded",disabled:i||n}),e.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-[#666666]",children:"Recordarme"})]}),e.jsx("a",{href:"#",className:"text-sm text-[#6B8E23] hover:text-[#566f1c] transition-colors",children:"¿Olvidaste tu contraseña?"})]}),e.jsx("button",{type:"button",onClick:f,disabled:i||n||!l.trim()||!c,className:`w-full flex items-center justify-center gap-2 py-3 px-4 rounded-lg transition-all duration-300 ${i||n||!l.trim()||!c?"bg-[#D94F4F]/70 text-white cursor-not-allowed":"bg-[#D94F4F] text-white hover:bg-[#c04545] shadow-md hover:shadow-lg transform hover:scale-[1.02]"}`,children:i?e.jsx(j,{}):n?"Sesión iniciada":e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Iniciar sesión"}),e.jsx(B,{size:18})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-[#666666]",children:["¿No tienes una cuenta?"," ",e.jsx("a",{href:"#",className:"font-medium text-[#6B8E23] hover:text-[#566f1c] transition-colors",children:"Regístrate aquí"})]})})]})]})]})}export{O as default};
