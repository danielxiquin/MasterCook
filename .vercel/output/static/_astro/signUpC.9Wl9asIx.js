import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.BVOCwoKb.js";import{m as v}from"./proxy.DaZtoVfV.js";import{C as k,L as N}from"./lock._tRpclxd.js";import{C as B}from"./check.BEjh-31M.js";import{U as S}from"./user.GXCi2v98.js";import{M as D}from"./mail.DV8CpiEN.js";import{A as z}from"./arrow-right.Bzx5iRUs.js";import"./createLucideIcon.BlEPHBTn.js";/*! js-cookie v3.0.5 | MIT */function j(r){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var x in d)r[x]=d[x]}return r}var A={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function y(r,c){function d(s,m,t){if(!(typeof document>"u")){t=j({},c,t),typeof t.expires=="number"&&(t.expires=new Date(Date.now()+t.expires*864e5)),t.expires&&(t.expires=t.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in t)t[a]&&(i+="; "+a,t[a]!==!0&&(i+="="+t[a].split(";")[0]));return document.cookie=s+"="+r.write(m,s)+i}}function x(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var m=document.cookie?document.cookie.split("; "):[],t={},i=0;i<m.length;i++){var a=m[i].split("="),b=a.slice(1).join("=");try{var f=decodeURIComponent(a[0]);if(t[f]=r.read(b,f),s===f)break}catch{}}return s?t[s]:t}}return Object.create({set:d,get:x,remove:function(s,m){d(s,"",j({},m,{expires:-1}))},withAttributes:function(s){return y(this.converter,j({},this.attributes,s))},withConverter:function(s){return y(j({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(r)}})}var P=y(A,{path:"/"});const R=()=>e.jsxs("div",{className:"absolute -z-10 inset-0 overflow-hidden opacity-70 pointer-events-none",children:[e.jsx("div",{className:"absolute top-[20%] -left-[10%] w-[40%] h-[40%] rounded-full bg-gradient-to-br from-[#D94F4F]/20 to-transparent blur-3xl"}),e.jsx("div",{className:"absolute top-[60%] -right-[10%] w-[30%] h-[30%] rounded-full bg-gradient-to-br from-[#6B8E23]/20 to-transparent blur-3xl"})]}),I=()=>e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"});function $(){const[r,c]=u.useState(""),[d,x]=u.useState(""),[s,m]=u.useState(""),[t,i]=u.useState(""),[a,b]=u.useState(!1),[f,g]=u.useState(null),[l,w]=u.useState(!1),[p,E]=u.useState(0),C=n=>{let o=0;n.length>=8&&(o+=1),/[A-Z]/.test(n)&&(o+=1),/[0-9]/.test(n)&&(o+=1),/[^A-Za-z0-9]/.test(n)&&(o+=1),E(o)},F=async n=>{if(n.preventDefault(),s!==t){g("Las contraseñas no coinciden");return}if(p<3){g("La contraseña debe ser más segura");return}b(!0),g(null);try{const o=await fetch("https://booking-service.mangoflower-5e37f0a4.eastus.azurecontainerapps.io/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:d,password:s})}),h=await o.json();if(!o.ok)throw new Error(h.message||"Error al crear la cuenta");h.token&&(P.set("auth_token",h.token,{expires:7,path:"/"}),h.user&&localStorage.setItem("user",JSON.stringify(h.user))),w(!0),setTimeout(()=>{window.location.href=h.token?"/":"/login"},2e3)}catch(o){g(o.message||"Ocurrió un error durante el registro")}finally{b(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#FAFAFA] flex items-center justify-center px-4 py-12",children:[e.jsx(R,{}),e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md bg-white rounded-xl border border-[#e0dfdf] overflow-hidden",children:[e.jsxs("div",{className:"px-8 pt-8 pb-6 border-b border-[#E5E5E5]",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#333333] mb-2",children:"Crear cuenta"}),e.jsx("p",{className:"text-[#666666]",children:"Regístrate para acceder a todos nuestros servicios"})]}),e.jsxs("div",{className:"p-8",children:[f&&e.jsxs(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-[#D94F4F]/10 border border-[#D94F4F]/20 rounded-lg flex items-center gap-3 text-[#D94F4F]",children:[e.jsx(k,{size:18}),e.jsx("p",{children:f})]}),l&&e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-[#6B8E23]/10 border border-[#6B8E23]/20 rounded-lg flex items-center gap-3 text-[#6B8E23]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{size:18}),e.jsx("p",{children:"¡Cuenta creada correctamente! Redirigiendo..."})]})}),e.jsxs("form",{onSubmit:F,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-[#333333]",children:"Nombre completo"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(S,{size:18})}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:r,onChange:n=>c(n.target.value),placeholder:"Juan Pérez",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333] placeholder:text-[#999999]",disabled:a||l})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[#333333]",children:"Correo electrónico"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(D,{size:18})}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:d,onChange:n=>x(n.target.value),placeholder:"correo@ejemplo.com",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333] placeholder:text-[#999999]",disabled:a||l})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-[#333333]",children:"Contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(N,{size:18})}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:n=>{m(n.target.value),C(n.target.value)},placeholder:"••••••••",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333]",disabled:a||l})]}),s&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"flex gap-1 mb-1",children:[...Array(4)].map((n,o)=>e.jsx("div",{className:`h-1 flex-1 rounded-full ${o<p?o<2?"bg-[#D94F4F]":"bg-[#6B8E23]":"bg-[#E5E5E5]"}`},o))}),e.jsxs("p",{className:"text-xs text-[#666666]",children:[p===0&&"Contraseña muy débil",p===1&&"Contraseña débil",p===2&&"Contraseña moderada",p===3&&"Contraseña fuerte",p===4&&"Contraseña muy fuerte"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-[#333333]",children:"Confirmar contraseña"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-[#666666]",children:e.jsx(N,{size:18})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:t,onChange:n=>i(n.target.value),placeholder:"••••••••",className:"block w-full pl-10 pr-3 py-3 border border-[#E5E5E5] rounded-lg focus:ring-2 focus:ring-[#6B8E23] focus:border-[#6B8E23] outline-none text-[#333333]",disabled:a||l})]}),t&&s!==t&&e.jsx("p",{className:"mt-1 text-xs text-[#D94F4F]",children:"Las contraseñas no coinciden"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-[#6B8E23] focus:ring-[#6B8E23] border-[#E5E5E5] rounded",disabled:a||l}),e.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-[#666666]",children:["Acepto los"," ",e.jsx("a",{href:"/terms",className:"text-[#6B8E23] hover:underline",children:"términos y condiciones"})]})]}),e.jsx("button",{type:"submit",disabled:a||l,className:`w-full flex items-center justify-center gap-2 py-3 px-4 rounded-lg transition-all duration-300 ${a||l?"bg-[#D94F4F]/70 text-white cursor-not-allowed":"bg-[#D94F4F] text-white hover:bg-[#c04545] shadow-md hover:shadow-lg"}`,children:a?e.jsx(I,{}):l?"Cuenta creada":e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Crear cuenta"}),e.jsx(z,{size:18})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-[#666666]",children:["¿Ya tienes una cuenta?"," ",e.jsx("a",{href:"/login",className:"font-medium text-[#6B8E23] hover:text-[#566f1c] transition-colors",children:"Inicia sesión"})]})})]})]})]})}export{$ as default};
