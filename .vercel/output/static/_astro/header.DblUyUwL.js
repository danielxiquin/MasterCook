import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.RH_Wq4ov.js";import{X as M}from"./x.C9bScxff.js";import{S as k}from"./shopping-bag.DlimQM-Z.js";import{c as j}from"./createLucideIcon.CFjhCtiB.js";import{A as z}from"./arrow-right.1S_H47eA.js";import{U as C}from"./user.GJspPIFP.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],T=j("log-in",E);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],I=j("log-out",S);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],D=j("menu",A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],_=j("trash",U);function O({isOpen:h,setIsOpen:g}){const[a,o]=r.useState([]),[i,m]=r.useState(0),[n,u]=r.useState(0),[v,c]=r.useState(!1);r.useEffect(()=>{h&&(y(),f())},[h]);const y=()=>{const s=localStorage.getItem("salsasCart");if(s){const t=JSON.parse(s);o(t),p(t)}},f=()=>{const t=document.cookie.split(";").find(l=>l.trim().startsWith("auth_token="));c(!!t)},p=s=>{const t=s.length,l=s.reduce((x,w)=>x+w.price,0);u(t),m(l)},N=s=>{const t=a.filter(l=>l.id!==s);o(t),p(t),localStorage.setItem("salsasCart",JSON.stringify(t))},d=()=>{g(!1)},b=s=>{v?d():(s.preventDefault(),window.location.href=`/login?redirect=${encodeURIComponent("/checkout")}`)};return h?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:d,style:{animation:"fadeIn 0.3s ease-out forwards"}}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-full sm:max-w-md bg-[#FAFAFA] shadow-xl overflow-hidden flex flex-col",style:{animation:"slideIn 0.3s ease-out forwards"},children:e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"border-b border-[#E5E5E5] p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#333333] m-0",children:"Tu Carrito"}),e.jsx("span",{className:"ml-2 text-sm bg-[#D94F4F] text-white px-2 py-0.5 rounded-full w-7 h-7 flex items-center justify-center",children:n})]}),e.jsx("button",{onClick:d,className:"rounded-full hover:bg-[#FFF3E2] p-2 transition-colors",children:e.jsx(M,{className:"w-5 h-5 text-[#333333]"})})]}),a.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6 text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-[#FFF3E2] flex items-center justify-center mb-4",children:e.jsx(k,{className:"w-12 h-12 text-[#D94F4F]",strokeWidth:1.5})}),e.jsx("h3",{className:"text-xl font-bold text-[#333333] mb-2",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-[#666666] max-w-xs",children:"Reserva un taller de cocina y vuelve aquí para completar tu compra."}),e.jsx("a",{href:"/talleres",onClick:d,className:"block py-2 mt-6 bg-[#D94F4F] text-white hover:bg-[#c04545] font-medium rounded-lg px-6 shadow-md transition-all",children:"Explorar talleres"})]}):e.jsx("div",{className:"flex-1 overflow-y-auto py-4 space-y-4 px-4",children:a.map((s,t)=>e.jsx("div",{className:"group  bg-white p-4 border border-[#E5E5E5] hover:border-[#D94F4F] hover:shadow-md transition-all duration-300",style:{animation:`fadeInUp 0.3s ease-out forwards ${t*.1}s`},children:e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative overflow-hidden  aspect-square h-20 w-20 bg-[#FFF3E2]",children:[e.jsx("img",{src:s.imageUrl||"/images/placeholder.jpg",alt:s.name,className:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110"}),s.discount&&s.discount!==0&&e.jsxs("div",{className:"absolute top-0 right-0 bg-[#D94F4F] text-white text-xs font-bold px-1.5 py-0.5 rounded-bl-md",children:["-",s.discount,"%"]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[#333333]",children:s.name.length>24?s.name.slice(0,22)+"...":s.name}),e.jsxs("p",{className:"text-xs text-[#666666]",children:[s.date," - ",s.time]})]}),e.jsx("button",{onClick:()=>N(s.id),className:"rounded-full hover:bg-[#FFF3E2] text-[#666666] hover:text-[#D94F4F] -mt-1 -mr-1 h-8 w-8 flex items-center justify-center",children:e.jsx(_,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-3 flex items-center justify-end",children:e.jsx("div",{className:"text-right",children:s.discount&&s.discount!==0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xs line-through text-[#666666]",children:["GTQ ",s.originalPrice.toFixed(2)]}),e.jsxs("span",{className:"block text-[#D94F4F] font-medium",children:["GTQ ",s.price.toFixed(2)]})]}):e.jsxs("span",{className:"text-[#D94F4F] font-medium",children:["GTQ ",s.price.toFixed(2)]})})})]})]})},s.id))}),a.length>0&&e.jsx("div",{className:"border-t border-[#E5E5E5] pt-4 pb-6 px-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-[#666666] mb-2",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["GTQ ",i.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-[#666666] mb-2",children:[e.jsx("span",{children:"Impuestos"}),e.jsx("span",{children:"Incluidos"})]}),e.jsx("div",{className:"border-t border-[#E5E5E5] my-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-[#333333]",children:"Total"}),e.jsxs("span",{className:"font-bold text-xl text-[#D94F4F]",children:["GTQ ",i.toFixed(2)]})]})]}),v?e.jsxs("a",{href:"/checkout",onClick:b,className:"block w-full bg-[#D94F4F] hover:bg-[#c04545] text-white font-bold py-3 rounded-lg transition-all duration-300 text-center flex items-center justify-center gap-2 shadow-md",children:["Finalizar compra",e.jsx(z,{className:"w-5 h-5 transition-transform group-hover:translate-x-1"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"p-3 bg-[#FFF3E2] text-[#D94F4F] rounded-lg text-sm",children:"Para finalizar tu compra, debes iniciar sesión como miembro de MasterCook Academy."}),e.jsxs("a",{href:"/login?redirect=/checkout",className:"block w-full bg-[#D94F4F] hover:bg-[#c04545] text-white font-bold py-3 rounded-lg transition-all duration-300 text-center flex items-center justify-center gap-2 shadow-md",children:["Iniciar sesión",e.jsx(T,{className:"w-5 h-5"})]})]})]})})]})}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        
        @keyframes slideIn {
          from { transform: translateX(100%); }
          to { transform: translateX(0); }
        }
        
        @keyframes fadeInUp {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `})]}):null}function R(){const[h,g]=r.useState(!1),[a,o]=r.useState(!1),[i,m]=r.useState(!1),[n,u]=r.useState(!1),[v,c]=r.useState(null);r.useEffect(()=>{const s=()=>{const l=document.cookie.split(";");let x=null;for(const w of l){const F=w.trim();if(F.startsWith("auth_token=")){x=F.substring(11);break}}x?(c(x),y(x)):o(!1)};s();const t=setInterval(s,5e3);return()=>clearInterval(t)},[]);const y=async s=>{try{(await fetch("https://booking-service.mangoflower-5e37f0a4.eastus.azurecontainerapps.io/api/auth/me",{headers:{Authorization:`Bearer ${s}`}})).ok?o(!0):(console.error("Token inválido o expirado"),f(),c(null),o(!1))}catch(t){console.error("Error al verificar el token:",t),f(),c(null),o(!1)}},f=()=>{document.cookie="auth_token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"},p=()=>{g(!0),n&&u(!1)},N=()=>{m(!i)},d=()=>{u(!n)},b=()=>{f(),c(null),o(!1),m(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-40 bg-white/30 backdrop-blur-md border-b border-gray-200",children:[e.jsxs("div",{className:"hidden lg:grid grid-cols-3 w-full",children:[e.jsxs("div",{className:"flex items-stretch",children:[e.jsxs("a",{href:"/",className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsx("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300",children:"Inicio"})]}),e.jsxs("a",{href:"/workshops",className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsx("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300",children:"Talleres"})]}),e.jsxs("a",{href:"/about",className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsx("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300",children:"Sobre Nosotros"})]})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("a",{href:"/",className:"text-primary font-bold",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M7 5a5 5 0 0 0-2 9.584v2.666h14v-2.666a5.001 5.001 0 0 0-2.737-9.53a4.502 4.502 0 0 0-8.526 0A5 5 0 0 0 7 5m11.998 13.75H5.002c.01 1.397.081 2.162.584 2.664C6.172 22 7.114 22 9 22h6c1.886 0 2.828 0 3.414-.586c.503-.502.574-1.267.584-2.664"})})})}),e.jsxs("div",{className:"flex items-stretch justify-end",children:[e.jsxs("a",{href:"/contact",className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-l border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsx("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300",children:"Contacto"})]}),e.jsxs("button",{onClick:p,className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-l border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsxs("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300 flex items-center",children:[e.jsx(k,{className:"w-5 h-5 mr-2"}),"Carrito"]})]}),a?e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:N,className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsx("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300",children:"Mi Cuenta"})]}),i&&e.jsxs("div",{className:"absolute right-0 w-48 mt-2 py-2 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:[e.jsxs("a",{href:"/profile",className:"flex items-center px-4 py-2 text-gray-800 hover:bg-gray-100",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Mi Perfil"]}),e.jsxs("button",{onClick:b,className:"flex items-center w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-100",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Cerrar Sesión"]})]})]}):e.jsxs("a",{href:"/login",className:"group relative overflow-hidden flex items-center h-16 px-6 md:px-10 text-main-text border-r border-gray-300",children:[e.jsx("span",{className:"absolute inset-0 bg-light-background translate-y-full group-hover:translate-y-0 transition-transform duration-300 ease-in-out z-0"}),e.jsx("span",{className:"relative z-10 group-hover:text-primary transition-colors duration-300",children:"Usuario"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center px-4 lg:hidden",children:[e.jsx("button",{onClick:d,className:"p-2 text-gray-600 focus:outline-none",children:n?e.jsx(M,{className:"w-6 h-6"}):e.jsx(D,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex justify-center items-center py-3",children:e.jsx("a",{href:"/",className:"text-primary font-bold",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M7 5a5 5 0 0 0-2 9.584v2.666h14v-2.666a5.001 5.001 0 0 0-2.737-9.53a4.502 4.502 0 0 0-8.526 0A5 5 0 0 0 7 5m11.998 13.75H5.002c.01 1.397.081 2.162.584 2.664C6.172 22 7.114 22 9 22h6c1.886 0 2.828 0 3.414-.586c.503-.502.574-1.267.584-2.664"})})})}),e.jsx("button",{onClick:p,className:"p-2 text-gray-600 focus:outline-none",children:e.jsx(k,{className:"w-6 h-6"})})]}),n&&e.jsx("div",{className:"lg:hidden bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("a",{href:"/",className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50",children:"Inicio"}),e.jsx("a",{href:"/workshops",className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50",children:"Talleres"}),e.jsx("a",{href:"/about",className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50",children:"Sobre Nosotros"}),e.jsx("a",{href:"/contact",className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50",children:"Contacto"}),a?e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/profile",className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50 flex items-center",children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),"Mi Perfil"]}),e.jsxs("button",{onClick:b,className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50 flex items-center w-full text-left",children:[e.jsx(I,{className:"w-5 h-5 mr-2"}),"Cerrar Sesión"]})]}):e.jsx("a",{href:"/login",className:"py-4 px-6 border-b border-gray-200 text-main-text hover:bg-gray-50",children:"Usuario"})]})})]}),i&&a&&e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>m(!1)}),n&&e.jsx("div",{className:"fixed inset-0 z-30 bg-black/30 lg:hidden",onClick:()=>u(!1)}),e.jsx(O,{isOpen:h,setIsOpen:g})]})}export{R as default};
